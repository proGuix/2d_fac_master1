angular.module("app", [])
    .controller("ctrl", function($scope) {
	$scope.data = {"gBatAdmin" :
		       {"sg7" : {"r1" : ["60", "160", "440", "40", "white", "black", "1", "0"],
				 "l1": ["60", "160", "60", "200", "black", "3"],
				 "l2": ["500", "160", "500", "170", "black", "3"],
				 "l3": ["500", "200", "500", "190", "black", "3"],
				 "l4": ["500", "170", "500", "190", "black", "1"],
				 "t" : ["Le couloir :", " - 2 machines à café", " - 1 entrée/sortie"],
				 "p" : [["60", "160", "500", "200"]]
				},
			"sg1" : {"r1" : ["60", "60", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["60", "60", "206.6", "60", "black", "3"],
				 "l2": ["60", "60", "60", "160", "black", "3"],
				 "l3": ["60", "160", "123.3", "160", "black", "3"],
				 "l4": ["143.3", "160", "206.6", "160", "black", "3"],
				 "l5": ["206.6", "60", "206.6", "100", "black", "3"],
				 "l6": ["206.6", "120", "206.6", "160", "black", "3"],
				 "r2": ["70", "90", "60", "20", "#CD853F", "#CD853F", "2", "135"],
				 "r3": ["85", "85", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "r4": ["115", "105", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "r5": ["105", "115", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "t" : ["Bureau 1 :", " - 1 table", " - 3 chaises"],
				 "p" : [["60", "60", "206.6", "160"]]
				},
			"sg2" : {"r1" : ["206.6", "60", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["206.6", "60", "353.3", "60", "black", "3"],
				 "l2": ["206.6", "160", "270", "160", "black", "3"],
				 "l3": ["290", "160", "353.3", "160", "black", "3"],
				 "l4": ["353.3", "60", "353.3", "100", "black", "3"],
				 "l5": ["353.3", "120", "353.3", "160", "black", "3"],
				 "c1": ["280", "110", "20", "#DEB887", "#DEB887", "2"],
				 "r2": ["250", "108", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r3": ["306", "108", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r4": ["278", "80", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r5": ["278", "136", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "t" : ["Salle de réunion 1 :", " - 1 table ronde", " - 4 chaises"],
				 "p" : [["206.6", "60", "353.3", "160"]]
				},
			"sg3" : {"r1" : ["353.3", "60", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["353.3", "60", "500", "60", "black", "3"],
				 "l2": ["353.3", "160", "416.6", "160", "black", "3"],
				 "l3": ["436.6", "160", "500", "160", "black", "3"],
				 "l4": ["500", "60", "500", "160", "black", "3"],
				 "r2": ["400", "80", "60", "20", "#CD853F", "#CD853F", "2", "0"],
				 "r3": ["428", "70", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r4": ["423", "105", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r5": ["433", "105", "4", "4", "#A0522D", "#A0522D", "2", "0"],				 
				 "t" : ["Bureau Master :", " - 1 bureau", " - 3 chaises"],
				 "p" : [["353.3", "60", "500", "160"]]
				},
			"sg4" : {"r1" : ["60", "200", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["60", "300", "206.6", "300", "black", "3"],
				 "l2": ["60", "200", "60", "300", "black", "3"],
				 "l3": ["60", "200", "123.3", "200", "black", "3"],
				 "l4": ["143.3", "200", "206.6", "200", "black", "3"],
				 "l5": ["206.6", "200", "206.6", "246.6", "black", "3"],
				 "l6": ["206.6", "266.6", "206.6", "300", "black", "3"],
				 "r2": ["70", "250", "60", "20", "#CD853F", "#CD853F", "2", "45"],
				 "r3": ["85", "270", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "r4": ["115", "250", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "r5": ["105", "240", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				 "t" : ["Bureau 2 :", " - 1 table", " - 3 chaises"],
				 "p" : [["60", "200", "206.6", "300"]]
				},
			"sg5" : {"r1" : ["206.6", "200", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["206.6", "300", "353.3", "300", "black", "3"],
				 "l2": ["206.6", "200", "270", "200", "black", "3"],
				 "l3": ["290", "200", "353.3", "200", "black", "3"],
				 "l5": ["353.3", "200", "353.3", "246.6", "black", "3"],
				 "l6": ["353.3", "266.6", "353.3", "300", "black", "3"],
				 "c1": ["280", "250", "20", "#DEB887", "#DEB887", "2"],
				 "r2": ["250", "248", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r3": ["306", "248", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r4": ["278", "220", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r5": ["278", "276", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "t" : ["Salle de réunion 2 :", " - 1 table ronde", " - 4 chaises"],
				 "p" : [["206.6", "200", "353.3", "300"]]
				},
			"sg6" : {"r1" : ["353.3", "200", "146.6", "100", "white", "black", "1", "0"],
				 "l1": ["353.3", "300", "500", "300", "black", "3"],
				 "l2": ["353.3", "200", "416.6", "200", "black", "3"],
				 "l3": ["436.6", "200", "500", "200", "black", "3"],
				 "l4": ["500", "200", "500", "300", "black", "3"],
				 "r2": ["400", "260", "60", "20", "#CD853F", "#CD853F", "2", "0"],
				 "r3": ["428", "290", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r4": ["423", "250", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "r5": ["433", "250", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				 "t" : ["Bureau Licence", " - 1 bureau", " - 3 chaises"],
				 "p" : [["353.3", "200", "500", "300"]]
				},
			"t" : ["Batiment administratif"],
			"p" : ["60", "60", "500", "300"]
		       },

		       "gBatCours" : 
		       {"sg18" : { "d" : ["M 820 60 L 860 60 L 860 110 L 1040 110 L 1040 130 L 860 130 L 860 230 L 1040 230 L 1040 250 L 860 250 L 860 300 L 820 300 Z", "white", "black", "1", "0"],
				   "l1": ["820", "60", "830", "60", "black", "3"],
				   "l2": ["850", "60", "860", "60", "black", "3"],
				   "l3": ["820", "300", "830", "300", "black", "3"],
				   "l4": ["850", "300", "860", "300", "black", "3"],
				   "l5": ["1040", "110", "1040", "130", "black", "3"],
				   "l6": ["1040", "230", "1040", "250", "black", "3"],
				   "t" : ["Couloirs du batiment :", " - 2 entrées/sorties", " - 2 machines à café"],
				   "p" : [["820" , "60", "860", "300"], ["860", "110", "1040", "130"], ["860", "230", "1040", "250"]]
				 },			
			"sg8" : {"r1": ["600", "60", "220", "120", "white", "black", "1", "0"],
				 "l1": ["600", "60", "820", "60", "black", "3"],
				 "l2": ["600", "60", "600", "180", "black", "3"],
				 "l3": ["600", "180", "820", "180", "black", "3"],
				 "l4": ["820", "60", "820", "110", "black", "3"],
				 "l5": ["820", "180", "820", "130", "black", "3"],
				 "l6": ["605", "100", "605", "140", "black", "2"],
				 "l7": ["600", "100", "605", "100", "black", "2"],
				 "l8": ["600", "140", "605", "140", "black", "2"],
				 "r2": ["620", "90", "20", "60", "#D2691E", "#D2691E", "2", "0"],
				 "r3": ["670", "70", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r4": ["700", "70", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r5": ["730", "70", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r6": ["760", "70", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r7": ["790", "70", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r8": ["670", "130", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r9": ["700", "130", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r10": ["730", "130", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r11": ["760", "130", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r12": ["790", "130", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "t" : ["Amphi A :", " - 40 places pour les étudiants", " - 1 bureau pour l'enseignant", " - 1 tableau", " - 1 video-projecteur"],
				 "p" : [["600", "60", "820", "180"]]
				},
			"sg9" : {"r1": ["600", "180", "220", "120", "white", "black", "1", "0"],
				 "l1": ["600", "180", "820", "180", "black", "3"],
				 "l2": ["600", "180", "600", "300", "black", "3"],
				 "l3": ["600", "300", "820", "300", "black", "3"],
				 "l4": ["820", "180", "820", "230", "black", "3"],
				 "l5": ["820", "300", "820", "250", "black", "3"],
				 "l6": ["605", "220", "605", "260", "black", "2"],
				 "l7": ["600", "220", "605", "220", "black", "2"],
				 "l8": ["600", "260", "605", "260", "black", "2"],
				 "r2": ["620", "210", "20", "60", "#D2691E", "#D2691E", "2", "0"],
				 "r3": ["670", "190", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r4": ["700", "190", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r5": ["730", "190", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r6": ["760", "190", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r7": ["790", "190", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r8": ["670", "250", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r9": ["700", "250", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r10": ["730", "250", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r11": ["760", "250", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "r12": ["790", "250", "13", "40", "#D2691E", "#D2691E", "2", "0"],
				 "t" : ["Amphi B :", " - 50 places pour les étudiants", " - 1 bureau pour l'enseignant", " - 2 tableaux", " - video-projecteur en panne"],
				 "p" : [["600", "180", "820", "300"]]
				},
			"sg10" : {"r1": ["860", "60", "90", "50", "white", "black", "1", "0"],
				  "l1": ["860", "60", "950", "60", "black", "3"],
				  "l2": ["860", "60", "860", "110", "black", "3"],
				  "l3": ["860", "110", "895", "110", "black", "3"],
				  "l4": ["915", "110", "950", "110", "black", "3"],
				  "l5": ["950", "60", "950", "110", "black", "3"],
				  "r2": ["875", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l6": ["882", "65", "882", "76", "black", "3"],
				  "r3": ["875", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l7": ["882", "94", "882", "105", "black", "3"],
				  "r4": ["900", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l8": ["907", "65", "907", "76", "black", "3"],
				  "r5": ["900", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l9": ["907", "94", "907", "105", "black", "3"],				  
				  "r6": ["925", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l10": ["932", "65", "932", "76", "black", "3"],
				  "r7": ["925", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l11": ["932", "94", "932", "105", "black", "3"],
				  "t" : ["Salle de TP 1 :", " - 10 postes d'ordinateurs"],
				  "p" : [["860", "60", "950", "110"]]
				 },
			"sg11" : {"r1": ["950", "60", "90", "50", "white", "black", "1", "0"],
				  "l1": ["950", "60", "1040", "60", "black", "3"],
				  "l2": ["950", "60", "950", "110", "black", "3"],
				  "l3": ["950", "110", "985", "110", "black", "3"],
				  "l4": ["1005", "110", "1040", "110", "black", "3"],
				  "l5": ["1040", "60", "1040", "110", "black", "3"],				  
				  "r2": ["965", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l6": ["972", "65", "972", "76", "black", "3"],
				  "r3": ["965", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l7": ["972", "94", "972", "105", "black", "3"],
				  "r4": ["990", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l8": ["997", "65", "997", "76", "black", "3"],
				  "r5": ["990", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l9": ["997", "94", "997", "105", "black", "3"],				  
				  "r6": ["1015", "67", "6", "7", "#6495ED", "black", "2", "0"],
				  "l10": ["1022", "65", "1022", "76", "black", "3"],
				  "r7": ["1015", "96", "6", "7", "#6495ED", "black", "2", "0"],
				  "l11": ["1022", "94", "1022", "105", "black", "3"],
				  "t" : ["Salle de TP 2 :", " - 15 postes d'ordinateurs"],
				  "p" : [["950", "60", "1040", "110"]]
				 },
			"sg12" : {"r1": ["860", "130", "90", "50", "white", "black", "1", "0"],
				  "l1": ["860", "180", "950", "180", "black", "3"],
				  "l2": ["860", "130", "860", "180", "black", "3"],
				  "l3": ["860", "130", "895", "130", "black", "3"],
				  "l4": ["915", "130", "950", "130", "black", "3"],
				  "l5": ["950", "130", "950", "180", "black", "3"],				  
				  "r2": ["875", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l6": ["882", "135", "882", "146", "black", "3"],
				  "r3": ["875", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l7": ["882", "164", "882", "175", "black", "3"],
				  "r4": ["900", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l8": ["907", "135", "907", "146", "black", "3"],
				  "r5": ["900", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l9": ["907", "164", "907", "175", "black", "3"],
				  "r6": ["925", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l10": ["932", "135", "932", "146", "black", "3"],
				  "r7": ["925", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l11": ["932", "164", "932", "175", "black", "3"],
				  "t" : ["Salle de TP 3 :", " - 15 postes d'ordinateurs"],
				  "p" : [["860", "130", "950", "180"]]
				 },
			"sg13" : {"r1": ["950", "130", "90", "50", "white", "black", "1", "0"],
				  "l1": ["950", "180", "1040", "180", "black", "3"],
				  "l2": ["950", "130", "950", "180", "black", "3"],
				  "l3": ["950", "130", "985", "130", "black", "3"],
				  "l4": ["1005", "130", "1040", "130", "black", "3"],
				  "l5": ["1040", "130", "1040", "180", "black", "3"],
				  "r2": ["965", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l6": ["972", "135", "972", "146", "black", "3"],
				  "r3": ["965", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l7": ["972", "164", "972", "175", "black", "3"],
				  "r4": ["990", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l8": ["997", "135", "997", "146", "black", "3"],
				  "r5": ["990", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l9": ["997", "164", "997", "175", "black", "3"],
				  "r6": ["1015", "137", "6", "7", "#6495ED", "black", "2", "0"],
				  "l10": ["1022", "135", "1022", "146", "black", "3"],
				  "r7": ["1015", "166", "6", "7", "#6495ED", "black", "2", "0"],
				  "l11": ["1022", "164", "1022", "175", "black", "3"],
				  "t" : ["Salle de TP 4 : ", " - 10 postes d'ordinateurs"],
				  "p" : [["950", "130", "1040", "180"]]
				 },
			"sg14" : {"r1": ["860", "180", "90", "50", "white", "black", "1", "0"],
				  "l1": ["860", "180", "950", "180", "black", "3"],
				  "l2": ["860", "180", "860", "230", "black", "3"],
				  "l3": ["860", "230", "895", "230", "black", "3"],
				  "l4": ["915", "230", "950", "230", "black", "3"],
				  "l5": ["950", "180", "950", "230", "black", "3"],
				  "r2": ["875", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l6": ["885", "187", "885", "197", "#A0522D", "2"],
				  "r3": ["875", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l7": ["885", "215", "885", "225", "#A0522D", "2"],
				  "r4": ["900", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l8": ["910", "187", "910", "197", "#A0522D", "2"],
				  "r5": ["900", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l9": ["910", "215", "910", "225", "#A0522D", "2"],
				  "r6": ["925", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l10": ["935", "187", "935", "197", "#A0522D", "2"],
				  "r7": ["925", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l11": ["935", "215", "935", "225", "#A0522D", "2"],
				  "t" : ["Salle de TD 1 : ", " - 20 places max"],
				  "p" : [["860", "180", "950", "230"]]
				 },
			"sg15" : {"r1": ["950", "180", "90", "50", "white", "black", "1", "0"],
				  "l1": ["950", "180", "1040", "180", "black", "3"],
				  "l2": ["950", "180", "950", "230", "black", "3"],
				  "l3": ["950", "230", "985", "230", "black", "3"],
				  "l4": ["1005", "230", "1040", "230", "black", "3"],
				  "l5": ["1040", "180", "1040", "230", "black", "3"],
				  "r2": ["965", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l6": ["975", "187", "975", "197", "#A0522D", "2"],
				  "r3": ["965", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l7": ["975", "215", "975", "225", "#A0522D", "2"],
				  "r4": ["990", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l8": ["1000", "187", "1000", "197", "#A0522D", "2"],
				  "r5": ["990", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l9": ["1000", "215", "1000", "225", "#A0522D", "2"],
				  "r6": ["1015", "185", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l10": ["1025", "187", "1025", "197", "#A0522D", "2"],
				  "r7": ["1015", "213", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l11": ["1025", "215", "1025", "225", "#A0522D", "2"],
				  "t" : ["Salle de TD 2 : ", " - 20 places max"],
				  "p" : [["950", "180", "1040", "230"]]
				 },
			"sg16" : {"r1" : ["860", "250", "90", "50", "white", "black", "1", "0"],
				  "l1": ["860", "300", "950", "300", "black", "3"],
				  "l2": ["860", "250", "860", "300", "black", "3"],
				  "l3": ["860", "250", "895", "250", "black", "3"],
				  "l4": ["915", "250", "950", "250", "black", "3"],
				  "l5": ["950", "250", "950", "300", "black", "3"],
				  "t" : ["Salle de TD 3 : ", " - 20 places max"],
				  "r2": ["875", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l6": ["885", "257", "885", "267", "#A0522D", "2"],
				  "r3": ["875", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l7": ["885", "285", "885", "295", "#A0522D", "2"],
				  "r4": ["900", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l8": ["910", "257", "910", "267", "#A0522D", "2"],
				  "r5": ["900", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l9": ["910", "285", "910", "295", "#A0522D", "2"],
				  "r6": ["925", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l10": ["935", "257", "935", "267", "#A0522D", "2"],
				  "r7": ["925", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l11": ["935", "285", "935", "295", "#A0522D", "2"],
				  "p" : [["860", "250", "950", "300"]]
				 },
			"sg17" : {"r1" : ["950", "250", "90", "50", "white", "black", "1", "0"],
				  "l1": ["950", "300", "1040", "300", "black", "3"],
				  "l2": ["950", "250", "950", "300", "black", "3"],
				  "l3": ["950", "250", "985", "250", "black", "3"],
				  "l4": ["1005", "250", "1040", "250", "black", "3"],
				  "l5": ["1040", "250", "1040", "300", "black", "3"],
				  "r2": ["965", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l6": ["975", "257", "975", "267", "#A0522D", "2"],
				  "r3": ["965", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l7": ["975", "285", "975", "295", "#A0522D", "2"],
				  "r4": ["990", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l8": ["1000", "257", "1000", "267", "#A0522D", "2"],
				  "r5": ["990", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l9": ["1000", "285", "1000", "295", "#A0522D", "2"],
				  "r6": ["1015", "255", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l10": ["1025", "257", "1025", "267", "#A0522D", "2"],
				  "r7": ["1015", "283", "7", "12", "#DEB887", "#DEB887", "2", "0"],
				  "l11": ["1025", "285", "1025", "295", "#A0522D", "2"],
				  "t" : ["Salle de TD 4 : ", " - 20 places max"],
				  "p" : [["950", "250", "1040", "300"]]
				 },
			"t" : ["Batiment des cours, TD, TP"],
			"p" : ["600", "60", "1040", "300"]
		       },

		       "gBatBU" : 
		       {"sg19" : {"r1" : ["60", "350", "88", "65", "white", "black", "1", "0"],
				  "l1": ["60", "350", "148", "350", "black", "3"],
				  "l2": ["60", "350", "60", "415", "black", "3"],
				  "l3": ["148", "350", "148", "415", "black", "3"],
				  "l4": ["60", "415", "94", "415", "black", "3"],
				  "l5": ["114", "415", "148", "415", "black", "3"],
				  "c1": ["100", "380", "12", "#DEB887", "#DEB887", "2"],
				  "r2": ["78", "378", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r3": ["110", "365", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				  "r4": ["108", "393", "4", "4", "#A0522D", "#A0522D", "2", "50"],
				  "l6": ["143", "370", "143", "395", "black", "2"],
				  "l7": ["143", "370", "148", "370", "black", "2"],
				  "l8": ["143", "395", "148", "395", "black", "2"],
				  "t" : ["Salle de travail 1 :", " - 1 table", " - 3 chaises", " - 1 tableau"],
				  "p" : [["60", "350", "148", "415"]]
				 },
			"sg20" : {"r1" : ["148", "350", "88", "65", "white", "black", "1", "0"],
				  "l1": ["148", "350", "236", "350", "black", "3"],
				  "l2": ["148", "350", "148", "415", "black", "3"],
				  "l3": ["236", "350", "236", "415", "black", "3"],
				  "l4": ["148", "415", "182", "415", "black", "3"],
				  "l5": ["202", "415", "236", "415", "black", "3"],
				  "c1": ["188", "380", "12", "#DEB887", "#DEB887", "2"],
				  "r2": ["166", "378", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r3": ["198", "365", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				  "r4": ["196", "393", "4", "4", "#A0522D", "#A0522D", "2", "50"],
				  "l6": ["231", "370", "231", "395", "black", "2"],
				  "l7": ["231", "370", "236", "370", "black", "2"],
				  "l8": ["231", "395", "236", "395", "black", "2"],
				  "t" : ["Salle de travail 2 :", " - 1 table", " - 3 chaises", " - 1 tableau"],
				  "p" : [["148", "350", "236", "415"]]
				 },
			"sg21" : {"r1" : ["236", "350", "88", "65", "white", "black", "1", "0"],
				  "l1": ["236", "350", "324", "350", "black", "3"],
				  "l2": ["236", "350", "236", "415", "black", "3"],
				  "l3": ["324", "350", "324", "415", "black", "3"],
				  "l4": ["236", "415", "270", "415", "black", "3"],
				  "l5": ["290", "415", "324", "415", "black", "3"],
				  "c1": ["276", "380", "12", "#DEB887", "#DEB887", "2"],
				  "r2": ["254", "378", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r3": ["286", "365", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				  "r4": ["284", "393", "4", "4", "#A0522D", "#A0522D", "2", "50"],
				  "l6": ["319", "370", "319", "395", "black", "2"],
				  "l7": ["319", "370", "324", "370", "black", "2"],
				  "l8": ["319", "395", "324", "395", "black", "2"],
				  "t" : ["Salle de travail 3 :", " - 1 table", " - 3 chaises", " - 1 tableau"],
				  "p" : [["236", "350", "324", "415"]]
				 },
			"sg22" : {"r1" : ["324", "350", "88", "65", "white", "black", "1", "0"],
				  "l1": ["324", "350", "412", "350", "black", "3"],
				  "l2": ["324", "350", "324", "415", "black", "3"],
				  "l3": ["412", "350", "412", "415", "black", "3"],
				  "l4": ["324", "415", "358", "415", "black", "3"],
				  "l5": ["378", "415", "412", "415", "black", "3"],
				  "c1": ["364", "380", "12", "#DEB887", "#DEB887", "2"],
				  "r2": ["342", "378", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r3": ["374", "365", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				  "r4": ["372", "393", "4", "4", "#A0522D", "#A0522D", "2", "50"],
				  "l6": ["407", "370", "407", "395", "black", "2"],
				  "l7": ["407", "370", "412", "370", "black", "2"],
				  "l8": ["407", "395", "412", "395", "black", "2"],
				  "t" : ["Salle de travail 4 :", " - 1 table", " - 3 chaises", " - 1 tableau"],
				  "p" : [["324", "350", "412", "415"]]
				 },
			"sg23" : {"r1" : ["412", "350", "88", "65", "white", "black", "1", "0"],
				  "l1": ["412", "350", "500", "350", "black", "3"],
				  "l2": ["412", "350", "412", "415", "black", "3"],
				  "l3": ["500", "350", "500", "415", "black", "3"],
				  "l4": ["412", "415", "446", "415", "black", "3"],
				  "l5": ["466", "415", "500", "415", "black", "3"],
				  "c1": ["452", "380", "12", "#DEB887", "#DEB887", "2"],
				  "r2": ["430", "378", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r3": ["462", "365", "4", "4", "#A0522D", "#A0522D", "2", "45"],
				  "r4": ["460", "393", "4", "4", "#A0522D", "#A0522D", "2", "50"],
				  "l6": ["495", "370", "495", "395", "black", "2"],
				  "l7": ["495", "370", "500", "370", "black", "2"],
				  "l8": ["495", "395", "500", "395", "black", "2"],
				  "t" : ["Salle de travail 5 :", " - 1 table", " - 3 chaises", " - 1 tableau"],
				  "p" : [["412", "350", "500", "415"]]
				 },
			"sg24" : {"r1" : ["60", "415", "440", "175", "white", "black", "1", "0"],
				  "l1": ["60", "415", "94", "415", "black", "3"],
				  "l2": ["114", "415", "182", "415", "black", "3"],
				  "l3": ["202", "415", "270", "415", "black", "3"],
				  "l4": ["290", "415", "358", "415", "black", "3"],
				  "l5": ["378", "415", "446", "415", "black", "3"],
				  "l6": ["466", "415", "500", "415", "black", "3"],
				  "l7": ["60", "415", "60", "590", "black", "3"],
				  "l8": ["60", "590", "270", "590", "black", "3"],
				  "l9": ["290", "590", "500", "590", "black", "3"],
				  "l10": ["500", "415", "500", "590", "black", "3"],
				  "r2": ["262.5", "480", "35", "35", "black", "black" , "1", "0"],
				  "r3": ["100", "485", "101", "24", "white", "black", "2", "0"],
				  "r4": ["110", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r5": ["110", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r6": ["115", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r7": ["115", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r8": ["120", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r9": ["120", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r10": ["125", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r11": ["125", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r12": ["130", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r13": ["130", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r14": ["135", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r15": ["135", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r16": ["140", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r17": ["140", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r18": ["145", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r19": ["145", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r20": ["150", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r21": ["150", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r22": ["155", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r23": ["155", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r24": ["160", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r25": ["160", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r26": ["165", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r27": ["165", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r28": ["170", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r29": ["170", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r30": ["175", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r31": ["175", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r32": ["180", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r33": ["180", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r34": ["185", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r35": ["185", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r36": ["190", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r37": ["190", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r38": ["359", "485", "101", "24", "white", "black", "2", "0"],
				  "r39": ["369", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r40": ["369", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r41": ["374", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r42": ["374", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r43": ["379", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r44": ["379", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r45": ["384", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r46": ["384", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r47": ["389", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r48": ["389", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r49": ["394", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r50": ["394", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r51": ["399", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r52": ["399", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r53": ["404", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r54": ["404", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r55": ["409", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r56": ["409", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r57": ["414", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r58": ["414", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r59": ["419", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r60": ["419", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r61": ["424", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r62": ["424", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r63": ["429", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r64": ["429", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r65": ["434", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r66": ["434", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r67": ["439", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r68": ["439", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r69": ["444", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r70": ["444", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r71": ["449", "489", "1", "6", "#FF6347", "#FF6347", "2", "0"],
				  "r72": ["449", "499", "1", "6", "#FF6347", "#FF6347", "2", "0"],				  
				  "c1": ["150", "450", "12", "#DEB887", "#DEB887", "2"],
				  "r73": ["130", "448", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r74": ["148", "430", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r75": ["148", "466", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r76": ["166", "448", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "c2": ["410", "450", "12", "#DEB887", "#DEB887", "2"],
				  "r77": ["390", "448", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r78": ["408", "430", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r79": ["408", "466", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r80": ["426", "448", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "c3": ["150", "550", "12", "#DEB887", "#DEB887", "2"],
				  "r81": ["130", "548", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r82": ["148", "530", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r83": ["148", "566", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r84": ["166", "548", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "c4": ["410", "550", "12", "#DEB887", "#DEB887", "2"],
				  "r85": ["390", "548", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r86": ["408", "530", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r87": ["408", "566", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "r88": ["426", "548", "4", "4", "#A0522D", "#A0522D", "2", "0"],
				  "t" : ["Salle principale : ", " - 1 point d'accueil", " - 1234 livres", " - 8 tables", " - 50 chaises", 
					 " - 1 toilette", " - 1 machine à café"],
				  "p" : [["60", "415", "500", "590"]]
				 },
			"t" : ["Bibliothèque Universitaire"],
			"p" : ["60", "350", "500", "590"]
		       }
		      };
	
	function drawG(g){ //dessine le groupe g
	    d3.select("svg").append("g").attr("id", g);
	    for(var sg in $scope.data[g]){
		drawSG(g, sg);
	    }
	}
	function drawSG(g, sg){ //dessine le sous groupe sg dans le groupe g
	    var svg = d3.select("g#"+g).append("g").attr("id", sg);
	    var tab = $scope.data[g];
	    for(var geom in tab[sg]){
		if(geom[0] == "d"){
		    svg = d3.select("g#"+sg).append("path")
			.attr("d", tab[sg][geom][0])
			.attr("fill", tab[sg][geom][1])
			.attr("stroke", tab[sg][geom][2])
			.attr("stroke-width", tab[sg][geom][3]);
		}
		if(geom[0] == "l"){
		    svg = d3.select("g#"+sg).append("line")
			.attr("x1", tab[sg][geom][0])
			.attr("y1", tab[sg][geom][1])
			.attr("x2", tab[sg][geom][2])
			.attr("y2", tab[sg][geom][3])
			.attr("stroke", tab[sg][geom][4])
			.attr("stroke-width", tab[sg][geom][5]);
		}
		if(geom[0] == "r"){
		    svg = d3.select("g#"+sg).append("rect")
			.attr("x", tab[sg][geom][0])
			.attr("y", tab[sg][geom][1])
			.attr("width", tab[sg][geom][2])
			.attr("height", tab[sg][geom][3])
			.attr("fill", tab[sg][geom][4])
			.attr("stroke", tab[sg][geom][5])
			.attr("stroke-width", tab[sg][geom][6])
			.attr("transform", "rotate(" + tab[sg][geom][7] + "," 
			      + (parseInt(tab[sg][geom][0])+(parseInt(tab[sg][geom][2]))/2) + "," 
			      + (parseInt(tab[sg][geom][1])+(parseInt(tab[sg][geom][3]))/2) + ")");
		}
		if(geom[0] == "c"){
		    svg = d3.select("g#"+sg).append("circle")
			.attr("cx", tab[sg][geom][0])
			.attr("cy", tab[sg][geom][1])
			.attr("r", tab[sg][geom][2])
			.attr("fill", tab[sg][geom][3])
			.attr("stroke", tab[sg][geom][4])
			.attr("stroke-width", tab[sg][geom][5]);
		}
	    }
	}

	function p(g, sg, x, y){ //fonction qui retourne vrai si la coordonnée (x, y) est en dehors de la figure du sous groupe et faux sinon
	    //ne fonctionne que pour des figures orthogonales
	    var boul = x < $scope.data[g][sg].p[0][0] || y < $scope.data[g][sg].p[0][1] ||
		x > $scope.data[g][sg].p[0][2] || y > $scope.data[g][sg].p[0][3];
	    for (var i = 1; i < $scope.data[g][sg].p.length; i++) {
		boul = boul && (x < $scope.data[g][sg].p[i][0] || y < $scope.data[g][sg].p[i][1] ||
				x > $scope.data[g][sg].p[i][2] || y > $scope.data[g][sg].p[i][3]);
	    }
	    return boul;
	}

	$scope.listG = []; //liste des groupes à traiter

	var ecartY = 0;
	var ecartX = 0;
	
	function moveBody(g, duration, posX, posY){ // affecte une translation et un aggrandissement à un groupe
	    ecartX = posX - $scope.data[g].p[0];
	    ecartY = posY - $scope.data[g].p[1];
	    d3.select("g#"+g)
		.transition()
		.attr("transform", "scale(1.5) translate(" + ecartX  + "," + ecartY + ")")
		.duration(duration);
	}

	function moveBodyOrigin(g, duration, posX, posY){ // le groupe revient à sa place d'origine avec la bonne taille
	    ecartX = posX - $scope.data[g].p[0];
	    ecartY = posY - $scope.data[g].p[1];
	    d3.select("g#"+g)
		.transition()
		.attr("transform", "scale(1) translate(" + ecartX  + "," + ecartY + ")")
		.duration(duration);
	}

	function removeBody(g, duration){ // efface un groupe
	    d3.select("g#"+g)
		.transition()
		.style("opacity", "0")
		.duration(duration);
	}

	function refreshBody(g, duration){ //réaffiche un groupe
	    d3.select("g#"+g)
		.transition()
		.style("opacity", "1")
		.duration(duration);
	}

	function l(g, sg){ // listener des sous groupes
	    d3.select("#"+sg)
		.on("mouseover", function(){
		    d3.select("#"+g).remove();
		    drawG(g);
		    d3.select("#"+sg).remove();
		    drawSG(g, sg);
		    refresh(sg);
		    moveBody(g, 0, 200, 100);
		    d3.select("#"+sg).on("mouseover", null);
		    d3.select("svg")
			.attr("class", null)
			.on("mousemove", function(){
			    var coordinates = [0, 0];
			    coordinates = d3.mouse(this);
			    var x = coordinates[0];
			    var y = coordinates[1];
			    refreshText(g, sg, x, y);
			    x /= 1.5;
			    x -= ecartX;
			    y /= 1.5;
			    y -= ecartY;
			    if(p(g, sg, x, y)){
				d3.select("svg").attr("class", "clickable")
				d3.select("g#text").remove();
				d3.select("#"+g).remove();
				drawG(g);
				for(var lol in $scope.data[g]){
				    l(g, lol);
				}
				moveBody(g, 0, 200, 100);
				d3.select("svg").on("mousemove", null);
			    }
			});
		});
	}

	function listenG(g, length){ //permet au groupe g d'etre ecouter
	    if(length == 1){
		moveBody(g, 1000, 200, 100);
		setTimeout(function(){
		    for(var lol in $scope.data[g]){
			l(g, lol);
		    }
		    d3.select("svg")
		    	.attr("class", "clickable")
			.on("click", function(){
			    var coordinates = [0, 0];
			    coordinates = d3.mouse(this);
			    var x = coordinates[0];
			    var y = coordinates[1];
			    x /= 1.5;
			    x -= ecartX;
			    y /= 1.5;
			    y -= ecartY;
			    if(x < $scope.data[g].p[0] || y < $scope.data[g].p[1] ||
			       x > $scope.data[g].p[2] || y > $scope.data[g].p[3]){
				
				d3.select("svg").on("click", null)
				    .on("mousemove", null)
				    .attr("class", null);
				for(var lol in $scope.data[g]){
				    d3.select("#"+lol).on("mouseover", null);
				}
				d3.select("g#text").remove();
				moveBodyOrigin(g, 1000, $scope.data[g].p[0], $scope.data[g].p[1]);
				for(var gg in $scope.data){
				    if(gg != g){ 
					refreshBody(gg, 1000);
				    }
				}
				setTimeout(function(){
				    refreshOrigin(null);
				}, 1000);
			    }
			});	    
		}, 1000);
	    }
	    else{
		d3.select("#"+g)
		    .on("click", function(){
			for(var gg in $scope.data){
			    if(gg != g){ 
				d3.select("#"+gg).on("click", null);
				d3.select("#"+gg).on("mouseover", null);
				removeBody(gg, 1000);
			    }
			}
			d3.select("#"+g).on("click", null);
			d3.select("svg").on("mousemove", null);
			d3.select("g#text").remove();
			$scope.listG = [];
			$scope.listG.push(g);
			traitement($scope.listG);
		    })
		    .on("mouseover", function(){
			refresh(g);
			d3.select("#"+g).on("mouseover", null)
			    .attr("class", "clickable");
			d3.select("svg")
			    .on("mousemove", function(){
				var coordinates = [0, 0];
				coordinates = d3.mouse(this);
				var x = coordinates[0];
				var y = coordinates[1];
				refreshText(null, g, x, y);
				if(x < $scope.data[g].p[0] || y < $scope.data[g].p[1] || x > $scope.data[g].p[2] || y > $scope.data[g].p[3]){
				    refreshOrigin(null);
				    d3.select("g#text").remove();
				    d3.select("svg").on("mousemove", null);
				}
			    });
		    });
	    }
	}
	
	function traitement(tab){ //a partir de la liste des groupes stocke dans tab, il dessine les groupes et integre des listeners 
	    for(var i in tab){
		drawG(tab[i]);
		listenG(tab[i], tab.length);
	    }
	}
	function init(){ //initialise  $scope.listG avec $scope.data
	    for(var g in $scope.data){
		$scope.listG.push(g);
	    }
	}

	init();
	traitement($scope.listG);

	function refresh(groupe){ // applique une couleur bleu sur le groupe
	    d3.select("#"+groupe).selectAll("line")
		.attr("stroke","blue")
		.attr("stroke-opacity", "0.8");
	    d3.select("#"+groupe).selectAll("rect")
		.attr("stroke","blue")
		.attr("fill", "blue")
		.attr("fill-opacity", "0.6")
		.attr("stroke-opacity", "0.8");
	    d3.select("#"+groupe).selectAll("circle")
		.attr("stroke","blue")
		.attr("fill", "blue")
		.attr("fill-opacity", "0.6")
		.attr("stroke-opacity", "0.8");
	    d3.select("#"+groupe).selectAll("path")
		.attr("stroke","blue")
		.attr("fill", "blue")
		.attr("fill-opacity", "0.6")
		.attr("stroke-opacity", "0.8");
	}

	function refreshText(parent, groupe, coordX, coordY){ // dessine du texte à coté de la souris
	    if(parent == null) tab = $scope.data[groupe];
	    else tab = $scope.data[parent][groupe];
	    d3.select("g#text").remove();
	    d3.select("svg").append("g").attr("id", "text");
	    for(var i in tab.t){
		d3.select("g#text")
		    .append("text")
		    .attr("x", coordX + 30)
		    .attr("y", coordY + 20*i)
		    .attr("font-family","arial")
		    .attr("font-size", "20px")
		    .style("font-weight", "bold")
		    .attr("fill", "orange")
		    .text(tab.t[i]);
	    }
	}

	function refreshOrigin(parent){ // redessine 1 ou tous les groupes avec leur parametres originaux
	    if(parent == null){ // enleve tous les groupes et les redessine tous
		for(var g in $scope.data){
		    d3.select("#"+g).remove();
		}
		$scope.listG = [];
		init();
		traitement($scope.listG);
	    }
	    else{ //enleve un groupe et le redessine en tenant compte de ses sous groupes
		d3.select("#"+parent).remove();
		drawG(parent);
		listenG(parent, 1); //param length doit etre = 1
	    }
	}
    });